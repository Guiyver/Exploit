-- getgenv().ToggleOn = false

-- getgenv().ToggleObbyCheats = "T"
-- getgenv().FakeBricks = Color3.fromRGB(0,0,0)
-- getgenv().HiddenBricks = Color3.fromRGB(0,255,0)
-- getgenv().ScriptBricks = Color3.fromRGB(255,0,0)
-- getgenv().IntangibleScriptBricks = Color3.fromRGB(255,255,255)
-- getgenv().CanQueryBricks = Color3.fromRGB(0,0,255)

local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
Player.CharacterAdded:Connect(function(v) Character = v end)
local UIS = game:GetService("UserInputService")

if ToggleOn == false then
    ToggleOn = true
    for _,v in pairs(workspace:GetDescendants()) do
        if v:IsA("BasePart") then
            local hasscripts = false
            for _,descendants in pairs(v:GetDescendants()) do
                if descendants:IsA("Script") then
                    hasscripts = true
                end
            end
            if hasscripts then
                local originalcolor = v.Color
                local originaltransparency = v.Transparency
                task.spawn(function()
                    if v.CanCollide then
                        v.Color = ScriptBricks
                        v.Transparency = 0
                    else
                        v.Color = IntangibleScriptBricks
                        v.Transparency = 0.5
                    end
                    while ToggleOn do
                        task.wait()
                    end
                    v.Color = originalcolor
                    v.Transparency = originaltransparency
                end)
            elseif v.CanCollide == false and v.Transparency < 1 then
                local originalcolor = v.Color
                local originaltransparency = v.Transparency
                task.spawn(function()
                    v.Color = FakeBricks
                    v.Transparency = 0
                    while ToggleOn do
                        task.wait()
                    end
                    v.Color = originalcolor
                    v.Transparency = originaltransparency
                end)
            elseif v.CanCollide == true and v.Transparency > .77 then
                local originalcolor = v.Color
                local originaltransparency = v.Transparency
                task.spawn(function()
                    v.Transparency = 0
                    v.Color = HiddenBricks
                    while ToggleOn do
                        task.wait()
                    end
                    v.Color = originalcolor
                    v.Transparency = originaltransparency
                end)
            elseif v.CanQuery == true and v.Transparency > .77 then
                local isaplayerpart = false
                for _,players in pairs(Players:GetPlayers()) do
                    if players.Character then
                        if v:IsDescendantOf(players.Character) then
                            isaplayerpart = true
                            break
                        end
                    end
                end
                if isaplayerpart == false then
                    local originalcolor = v.Color
                    local originaltransparency = v.Transparency
                    task.spawn(function()
                        v.Transparency = .5
                        v.Color = CanQueryBricks
                        while ToggleOn do
                            task.wait()
                        end
                        v.Color = originalcolor
                        v.Transparency = originaltransparency
                    end)
                end
            end
        end
    end
else
    ToggleOn = false
end
