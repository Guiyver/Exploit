local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
Player.CharacterAdded:Connect(function(v) Character = v end)
local UIS = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")

local ToggleOn = false

UIS.InputBegan:connect(function(UserInput,gameProcessed)
    local togglekeyupper = ToggleLightingCheats:upper()
    if UserInput.UserInputType == Enum.UserInputType.Keyboard and gameProcessed == false then
        if UserInput.KeyCode == Enum.KeyCode[togglekeyupper] then
            if ToggleOn == false then
                ToggleOn = true
                for i,v in pairs(Lighting:GetChildren()) do
                    if v:IsA("ColorCorrectionEffect") or v:IsA("Sky") or v:IsA("BlurEffect") or v:IsA("BloomEffect") or v:IsA("SunRaysEffect") then
                        if v.Enabled then
                            task.spawn(function()
                                while ToggleOn do
                                    task.wait()
                                end
                                v.Enabled = true
                            end)
                        end
                    end
                end
                local LightingProperties = {}
                LightingProperties.ogAmbient = Lighting.Ambient
                LightingProperties.ogBrightness = Lighting.Brightness
                LightingProperties.ogClockTime = Lighting.ClockTime
                LightingProperties.ogColorShiftBottom = Lighting.ColorShift_Bottom
                LightingProperties.ogColorShiftTop = Lighting.ColorShift_Top
                LightingProperties.ogExposureCompensation = Lighting.ExposureCompensation
                LightingProperties.ogFogColor = Lighting.FogColor
                LightingProperties.ogFogEnd = Lighting.FogEnd
                LightingProperties.ogGeographicLatitude = Lighting.GeographicLatitude
                LightingProperties.ogOutdoorAmbient = Lighting.OutdoorAmbient
                LightingProperties.ogGlobalShadows = Lighting.GlobalShadows
                Lighting.Ambient = Color3.fromRGB(255, 255, 255)
                Lighting.Brightness = 1
                Lighting.ClockTime = 14
                Lighting.ColorShift_Bottom = Color3.fromRGB(255, 255, 255)
                Lighting.ColorShift_Top = Color3.fromRGB(255, 255, 255)
                Lighting.ExposureCompensation = 0
                Lighting.FogColor = Color3.fromRGB(255, 255, 255)
                Lighting.FogEnd = 999999999
                Lighting.GeographicLatitude = 41.733
                Lighting.OutdoorAmbient = Color3.fromRGB(255, 255, 255)
                Lighting.GlobalShadows = true
                task.spawn(function()
                    while ToggleOn do
                        task.wait()
                    end
                    if Lighting.Ambient == Color3.fromRGB(255, 255, 255) then
                        Lighting.Ambient = LightingProperties.ogAmbient
                    end
                    if Lighting.Brightness == 1 then
                        Lighting.Brightness = LightingProperties.ogBrightness
                    end
                    if Lighting.ClockTime == 14 then
                        Lighting.ClockTime = LightingProperties.ogClockTime
                    end
                    if Lighting.ColorShift_Bottom == Color3.fromRGB(255, 255, 255) then
                        Lighting.ColorShift_Bottom = LightingProperties.ogColorShiftBottom
                    end
                    if Lighting.ColorShift_Top == Color3.fromRGB(255, 255, 255) then
                        Lighting.ColorShift_Top = LightingProperties.ogColorShiftTop
                    end
                    if Lighting.ExposureCompensation == 0 then
                        Lighting.ExposureCompensation = LightingProperties.ogExposureCompensation
                    end
                    if Lighting.FogColor == Color3.fromRGB(255, 255, 255) then
                        Lighting.FogColor = LightingProperties.ogFogColor
                    end
                    if Lighting.FogEnd == 999999999 then
                        Lighting.FogEnd = LightingProperties.ogFogEnd
                    end
                    if Lighting.GeographicLatitude == 41.733 then
                        Lighting.GeographicLatitude = LightingProperties.ogGeographicLatitude
                    end
                    if Lighting.OutdoorAmbient == Color3.fromRGB(255, 255, 255) then
                        Lighting.OutdoorAmbient = LightingProperties.ogOutdoorAmbient
                    end
                    if Lighting.GlobalShadows == true then
                        Lighting.GlobalShadows = LightingProperties.ogGlobalShadows
                    end
                end)
            else
                ToggleOn = false
            end
        end
    end
end)
